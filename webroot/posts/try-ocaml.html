<!doctype html><html><head><title>OCaml初探 - 掬一捧</title><link rel="stylesheet" href="/stylesheets/posts.css?v=MTU2MTM3MjMwMTQz"></head><body><header></header><article><h1>OCaml初探</h1><div class="meta"><div>编辑时间&nbsp;&nbsp;Tue Aug 16 2016 15:26:12 GMT+0800 (GMT+08:00)</div></div><h2 id="安装">安装</h2><p>macOS 系统通过<a href="http://brew.sh/">Homebrew</a>安装：</p><pre><code><span class="hljs-keyword">brew </span><span class="hljs-keyword">install </span>ocaml
<span class="hljs-keyword">brew </span><span class="hljs-keyword">install </span>opam</code></pre><h2 id="注释">注释</h2><pre><code class="language-ocaml"><span class="hljs-comment">(* 此处是单注释 *)</span>

<span class="hljs-comment">(*
  此处是多行注释
*)</span></code></pre><h2 id="函数调用">函数调用</h2><pre><code class="language-ocaml">plus a <span class="hljs-number">3</span> <span class="hljs-comment">(* a和3是函数plus的参数*)</span></code></pre><h2 id="函数定义">函数定义</h2><pre><code class="language-ocaml"><span class="hljs-keyword">let</span> hello <span class="hljs-literal">()</span> =
  print_endline <span class="hljs-string">"Hello World"</span>

hello<span class="hljs-literal">()</span>

<span class="hljs-keyword">let</span> average a b =
  (a +. b) /. <span class="hljs-number">2.0</span>

sum <span class="hljs-number">4</span> <span class="hljs-number">8</span>
</code></pre><h2 id="匿名函数定义">匿名函数定义</h2><pre><code class="language-ocaml"><span class="hljs-keyword">let</span> sum = <span class="hljs-keyword">fun</span> a b -&gt; (a +. b) /. <span class="hljs-number">2.0</span>

<span class="hljs-type">List</span>.map (<span class="hljs-keyword">fun</span> i -&gt; i*<span class="hljs-number">2</span>) [<span class="hljs-number">1</span>;<span class="hljs-number">2</span>;<span class="hljs-number">3</span>;]</code></pre><h2 id="数据类型">数据类型</h2><pre><code class="language-ocaml">
<span class="hljs-built_in">int</span>     <span class="hljs-number">31</span>-bit signed <span class="hljs-built_in">int</span> (roughly +/- <span class="hljs-number">1</span> billion) on <span class="hljs-number">32</span>-bit
        processors, <span class="hljs-keyword">or</span> <span class="hljs-number">63</span>-bit signed <span class="hljs-built_in">int</span> on <span class="hljs-number">64</span>-bit processors

<span class="hljs-built_in">float</span>   <span class="hljs-type">IEEE</span> double-precision floating point, equivalent <span class="hljs-keyword">to</span> <span class="hljs-type">C</span>\<span class="hljs-symbol">'s</span> double

<span class="hljs-built_in">bool</span>    <span class="hljs-type">A</span> boolean, written either <span class="hljs-literal">true</span> <span class="hljs-keyword">or</span> <span class="hljs-literal">false</span>

<span class="hljs-built_in">char</span>    <span class="hljs-number">8</span>-bit

<span class="hljs-built_in">string</span>  

<span class="hljs-built_in">unit</span>    <span class="hljs-type">Written</span> <span class="hljs-keyword">as</span> <span class="hljs-literal">()</span>
</code></pre><h2 id="递归函数">递归函数</h2><pre><code class="language-ocaml"><span class="hljs-keyword">let</span> <span class="hljs-keyword">rec</span> factorial n =
  <span class="hljs-keyword">if</span> n &lt;= <span class="hljs-number">1</span> <span class="hljs-keyword">then</span>
    <span class="hljs-number">1</span>
  <span class="hljs-keyword">else</span>
    factorial (n-<span class="hljs-number">1</span>) * n</code></pre><h2 id="局部变量">局部变量</h2><pre><code class="language-ocaml"><span class="hljs-keyword">let</span> average a b =
  <span class="hljs-keyword">let</span> sum = a +. b <span class="hljs-keyword">in</span>
  sum /. <span class="hljs-number">2.0</span></code></pre><h2 id="引用">引用</h2><pre><code class="language-ocaml"><span class="hljs-keyword">let</span> var_ref = <span class="hljs-built_in">ref</span> <span class="hljs-number">0</span>

var_ref := <span class="hljs-number">100</span>      <span class="hljs-comment">(* := 更改var_ref值 *)</span>

!var_ref            <span class="hljs-comment">(* ! 查看var_ref引用的值*)</span></code></pre><h2 id="数据结构">数据结构</h2><pre><code class="language-ocaml"><span class="hljs-comment">(* List *)</span>
[<span class="hljs-number">1</span>; <span class="hljs-number">2</span>; <span class="hljs-number">3</span>]

<span class="hljs-comment">(* Tuple *)</span>
(<span class="hljs-number">3</span>, <span class="hljs-string">"hello"</span>, <span class="hljs-string">'x'</span>)

<span class="hljs-comment">(* Record *)</span>
<span class="hljs-comment">(*
type pair =
  {a: int; b: string}
*)</span>

{ a = <span class="hljs-number">3</span>; b = <span class="hljs-string">"hello"</span> }

<span class="hljs-comment">(* Variant *)</span>
</code></pre></article><footer></footer></body></html>